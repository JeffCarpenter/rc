# -*- mode: shell-script; -*-

# default values
OFFLINEIMAPACCOUNT=Gmail
WORKPLACE=merunetworks.com
# default values




EDITOR='emacsclient -t -c -f ~/.emacs.d/server/general '
VISUAL='emacsclient -t -c -f ~/.emacs.d/server/general '

if [ "x${REMOTEEDITORHOST}" != "x" ] ; then
    EDITOR=$HOME/bin/rgeneral-editor
else
    EDITOR=$HOME/bin/general-editor
fi

VISUAL=$EDITOR

BROWSER=w3m

export EDITOR
export VISUAL
export BROWSER

MACHINE_ID=/var/lib/dbus/machine-id
if [ -r "$MACHINE_ID" ]
then
    MY_DBUS_SESSION=$(cat $MACHINE_ID)
fi
export MY_DBUS_SESSION


if [ "x" != "x$WORKPLACE" ] ; then
    if [  -d ~/.opt/p/$WORKPLACE ] ; then
        . ~/.opt/p/$WORKPLACE/env
        # ~/.opt/p/$WORKPLACE/run
    else
        echo ~/.opt/p/$WORKPLACE directory  do not exits, so setup ~/.opt/ directory. >&2
    fi
else
    if [ ! $SUDO_USER ] && [ "$TERM" != "dumb" ] ; then
        echo WORKPLACE is not set. >&2
    fi
fi


if [ "x${HOST}" != "x" ] ; then
  __comp=sh

  if [ -d ~/.rsetup/${__comp}/env.d/${HOST} ] ; then
      rm -rf ~/.rsetup/${__comp}/env.d/${HOST}
  fi

  if [ ! -e ~/.rsetup/${__comp}/env.d/${HOST} ] ; then
      mkdir ~/.rsetup/${__comp}/env.d/
      cp ~/.rsetup/${__comp}/env.tmpl ~/.rsetup/${__comp}/env.d/${HOST}
  fi

  if [ -r ~/.rsetup/${__comp}/env.d/${HOST} ] ; then
      . ~/.rsetup/${__comp}/env.d/${HOST}
  fi
  unset __comp
else
    echo env var HOST is not set $HOST
fi

unset MACHINE_ID
